<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Shader Example</title>
</head>
<body>
	<div id="shader"></div>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

	<script type="x-shader/x-vertex" id="vertex">
		void main() {
			gl_Position = vec4(position, 1.0);
		}
	</script>

	<script type="x-shader/x-fragment" id="fragment">
		uniform float u_time;
		uniform vec2 u_resolution;

		void main() {
			vec2 st = gl_FragCoord.xy / u_resolution.xy;
			gl_FragColor = vec4(st.x, st.y, abs(sin(u_time)), 1.0);
		}
	</script>

	<script>
		let camera, scene, renderer, clock;
		let uniforms;

		function init() {
			const container = document.getElementById("shader");

			clock = new THREE.Clock();
			camera = new THREE.Camera();
			camera.position.z = 1;

			scene = new THREE.Scene();

			const geometry = new THREE.PlaneBufferGeometry(2, 2);

			uniforms = {
				u_time: { type: "f", value: 1.0 },
				u_resolution: { type: "v2", value: new THREE.Vector2() },
			};

			const material = new THREE.ShaderMaterial({
				uniforms,
				vertexShader: document.getElementById("vertex").textContent,
				fragmentShader: document.getElementById("fragment").textContent
			});

			const mesh = new THREE.Mesh(geometry, material);
			scene.add(mesh);

			renderer = new THREE.WebGLRenderer();
			renderer.setPixelRatio(window.devicePixelRatio);

			container.appendChild(renderer.domElement);

			onWindowResize();
			window.addEventListener("resize", onWindowResize);
		}

		function onWindowResize() {
			renderer.setSize(window.innerWidth, window.innerHeight);
			uniforms.u_resolution.value.x = renderer.domElement.width;
			uniforms.u_resolution.value.y = renderer.domElement.height;
		}

		function render() {
			uniforms.u_time.value = clock.getElapsedTime();
			renderer.render(scene, camera);
		}

		function animate() {
			render();
			requestAnimationFrame(animate);
		}

		init();
		animate();
	</script>
</body>
</html>

